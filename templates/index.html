<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Data Collection Tool</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .tab-container {
            display: flex;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            background-color: #eee;
            border: none;
            cursor: pointer;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
        }
        .tab.active {
            background-color: #007bff;
            color: white;
        }
        .tab-content {
            display: none;
            padding: 20px;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 5px 5px;
        }
        .tab-content.active {
            display: block;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .list-container {
            margin-top: 20px;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 4px;
            max-height: 200px;
            overflow-y: auto;
        }
        .list-item {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        .list-item:last-child {
            border-bottom: none;
        }
        .section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        .section:last-child {
            border-bottom: none;
        }
        .section-title {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        .menu-bar {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        .menu-item {
            margin-right: 15px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Academic Data Collection Tool</h1>
        
        <div class="menu-bar">
            <div class="menu-item">
                <button onclick="saveData()">Save Data</button>
            </div>
            <div class="menu-item">
                <button onclick="loadData()">Load Data</button>
            </div>
        </div>
        
        <div class="tab-container">
            <button class="tab active" onclick="openTab(event, 'stream-semester')">Streams & Semesters</button>
            <button class="tab" onclick="openTab(event, 'major-minor')">Majors & Minors</button>
            <button class="tab" onclick="openTab(event, 'subjects-teachers')">Subjects & Teachers</button>
            <button class="tab" onclick="openTab(event, 'connections')">Connections</button>
        </div>
        
        <!-- Tab 1: Streams & Semesters -->
        <div id="stream-semester" class="tab-content active">
            <div class="section">
                <h3 class="section-title">Streams</h3>
                <div class="form-group">
                    <label for="stream-name">Stream Name:</label>
                    <input type="text" id="stream-name" placeholder="Enter stream name">
                    <button onclick="addStream()">Add Stream</button>
                </div>
                <div class="list-container">
                    <h4>Current Streams:</h4>
                    <div id="streams-list"></div>
                </div>
            </div>
            
            <div class="section">
                <h3 class="section-title">Semesters</h3>
                <div class="form-group">
                    <label for="semester-name">Semester Name:</label>
                    <input type="text" id="semester-name" placeholder="Enter semester name">
                    <button onclick="addSemester()">Add Semester</button>
                </div>
                <div class="list-container">
                    <h4>Current Semesters:</h4>
                    <div id="semesters-list"></div>
                </div>
            </div>
        </div>
        
        <!-- Tab 2: Majors & Minors -->
        <div id="major-minor" class="tab-content">
            <div class="section">
                <h3 class="section-title">Majors</h3>
                <div class="form-group">
                    <label for="major-name">Major Name:</label>
                    <input type="text" id="major-name" placeholder="Enter major name">
                    <button onclick="addMajor()">Add Major</button>
                </div>
                <div class="list-container">
                    <h4>Current Majors:</h4>
                    <div id="majors-list"></div>
                </div>
            </div>
            
            <div class="section">
                <h3 class="section-title">Minors</h3>
                <div class="form-group">
                    <label for="minor-name">Minor Name:</label>
                    <input type="text" id="minor-name" placeholder="Enter minor name">
                    <button onclick="addMinor()">Add Minor</button>
                </div>
                <div class="list-container">
                    <h4>Current Minors:</h4>
                    <div id="minors-list"></div>
                </div>
            </div>
        </div>
        
        <!-- Tab 3: Subjects & Teachers -->
        <div id="subjects-teachers" class="tab-content">
            <div class="section">
                <h3 class="section-title">Subjects</h3>
                <div class="form-group">
                    <label for="major-subject">Select Major/Minor:</label>
                    <select id="major-subject"></select>
                </div>
                <div class="form-group">
                    <label for="subject-name">Subject Name:</label>
                    <input type="text" id="subject-name" placeholder="Enter subject name">
                    <button onclick="addSubject()">Add Subject</button>
                </div>
                <div class="list-container">
                    <h4>Current Subjects:</h4>
                    <div id="subjects-list"></div>
                </div>
            </div>
            
            <div class="section">
                <h3 class="section-title">Teachers</h3>
                <div class="form-group">
                    <label for="subject-teacher">Select Subject:</label>
                    <select id="subject-teacher"></select>
                </div>
                <div class="form-group">
                    <label for="teacher-name">Teacher Name:</label>
                    <input type="text" id="teacher-name" placeholder="Enter teacher name">
                    <button onclick="addTeacher()">Add Teacher</button>
                </div>
                <div class="list-container">
                    <h4>Current Teachers:</h4>
                    <div id="teachers-list"></div>
                </div>
            </div>
        </div>
        
        <!-- Tab 4: Connections -->
        <div id="connections" class="tab-content">
            <div class="section">
                <h3 class="section-title">Major-Minor Connections</h3>
                <div class="form-group">
                    <label for="connection-major">Select Major:</label>
                    <select id="connection-major"></select>
                </div>
                <div class="form-group">
                    <label for="connection-minor">Select Minor:</label>
                    <select id="connection-minor"></select>
                </div>
                <div class="form-group">
                    <button onclick="addConnection()">Add Connection</button>
                </div>
                <div class="list-container">
                    <h4>Current Connections:</h4>
                    <div id="connections-list"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab functionality
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].className = tabcontent[i].className.replace(" active", "");
            }
            tablinks = document.getElementsByClassName("tab");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }
            document.getElementById(tabName).className += " active";
            evt.currentTarget.className += " active";
        }
        
        // API functions
        async function addStream() {
            const streamName = document.getElementById('stream-name').value.trim();
            if (!streamName) {
                alert('Please enter a stream name');
                return;
            }
            
            const response = await fetch('/add_stream', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `stream_name=${encodeURIComponent(streamName)}`
            });
            
            if (response.ok) {
                document.getElementById('stream-name').value = '';
                updateAllLists();
            }
        }
        
        async function addSemester() {
            const semesterName = document.getElementById('semester-name').value.trim();
            if (!semesterName) {
                alert('Please enter a semester name');
                return;
            }
            
            const response = await fetch('/add_semester', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `semester_name=${encodeURIComponent(semesterName)}`
            });
            
            if (response.ok) {
                document.getElementById('semester-name').value = '';
                updateAllLists();
            }
        }
        
        async function addMajor() {
            const majorName = document.getElementById('major-name').value.trim();
            if (!majorName) {
                alert('Please enter a major name');
                return;
            }
            
            const response = await fetch('/add_major', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `major_name=${encodeURIComponent(majorName)}`
            });
            
            if (response.ok) {
                document.getElementById('major-name').value = '';
                updateAllLists();
            }
        }
        
        async function addMinor() {
            const minorName = document.getElementById('minor-name').value.trim();
            if (!minorName) {
                alert('Please enter a minor name');
                return;
            }
            
            const response = await fetch('/add_minor', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `minor_name=${encodeURIComponent(minorName)}`
            });
            
            if (response.ok) {
                document.getElementById('minor-name').value = '';
                updateAllLists();
            }
        }
        
        async function addSubject() {
            const major = document.getElementById('major-subject').value;
            const subjectName = document.getElementById('subject-name').value.trim();
            
            if (!major) {
                alert('Please select a major/minor');
                return;
            }
            
            if (!subjectName) {
                alert('Please enter a subject name');
                return;
            }
            
            const response = await fetch('/add_subject', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `major=${encodeURIComponent(major)}&subject_name=${encodeURIComponent(subjectName)}`
            });
            
            if (response.ok) {
                document.getElementById('subject-name').value = '';
                updateAllLists();
            }
        }
        
        async function addTeacher() {
            const subject = document.getElementById('subject-teacher').value;
            const teacherName = document.getElementById('teacher-name').value.trim();
            
            if (!subject) {
                alert('Please select a subject');
                return;
            }
            
            if (!teacherName) {
                alert('Please enter a teacher name');
                return;
            }
            
            const response = await fetch('/add_teacher', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `subject=${encodeURIComponent(subject)}&teacher_name=${encodeURIComponent(teacherName)}`
            });
            
            if (response.ok) {
                document.getElementById('teacher-name').value = '';
                updateAllLists();
            }
        }
        
        async function addConnection() {
            const major = document.getElementById('connection-major').value;
            const minor = document.getElementById('connection-minor').value;
            
            if (!major || !minor) {
                alert('Please select both major and minor');
                return;
            }
            
            const response = await fetch('/add_connection', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `major=${encodeURIComponent(major)}&minor=${encodeURIComponent(minor)}`
            });
            
            if (response.ok) {
                updateAllLists();
            }
        }
        
        async function saveData() {
            const filename = prompt('Enter filename to save data:', 'academic_data.json');
            if (filename) {
                const response = await fetch('/save_data', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `filename=${encodeURIComponent(filename)}`
                });
                
                const result = await response.json();
                alert(result.message);
            }
        }
        
        async function loadData() {
            const filename = prompt('Enter filename to load data from:', 'academic_data.json');
            if (filename) {
                const response = await fetch('/load_data', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `filename=${encodeURIComponent(filename)}`
                });
                
                const result = await response.json();
                alert(result.message);
                updateAllLists();
            }
        }
        
        // Update all lists with current data
        async function updateAllLists() {
            const response = await fetch('/get_data');
            const data = await response.json();
            
            // Update streams list
            const streamsList = document.getElementById('streams-list');
            streamsList.innerHTML = '';
            data.streams.forEach(stream => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.textContent = stream;
                streamsList.appendChild(item);
            });
            
            // Update semesters list
            const semestersList = document.getElementById('semesters-list');
            semestersList.innerHTML = '';
            data.semesters.forEach(semester => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.textContent = semester;
                semestersList.appendChild(item);
            });
            
            // Update majors list
            const majorsList = document.getElementById('majors-list');
            majorsList.innerHTML = '';
            data.majors.forEach(major => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.textContent = major;
                majorsList.appendChild(item);
            });
            
            // Update minors list
            const minorsList = document.getElementById('minors-list');
            minorsList.innerHTML = '';
            data.minors.forEach(minor => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.textContent = minor;
                minorsList.appendChild(item);
            });
            
            // Update major/minor dropdown for subjects
            const majorSubjectSelect = document.getElementById('major-subject');
            majorSubjectSelect.innerHTML = '';
            [...data.majors, ...data.minors].forEach(m => {
                const option = document.createElement('option');
                option.value = m;
                option.textContent = m;
                majorSubjectSelect.appendChild(option);
            });
            
            // Update subjects list based on selected major
            const selectedMajor = majorSubjectSelect.value;
            const subjectsList = document.getElementById('subjects-list');
            subjectsList.innerHTML = '';
            if (selectedMajor && data.subjects[selectedMajor]) {
                data.subjects[selectedMajor].forEach(subject => {
                    const item = document.createElement('div');
                    item.className = 'list-item';
                    item.textContent = subject;
                    subjectsList.appendChild(item);
                });
            }
            
            // Update subject dropdown for teachers
            const subjectTeacherSelect = document.getElementById('subject-teacher');
            subjectTeacherSelect.innerHTML = '';
            for (const major in data.subjects) {
                data.subjects[major].forEach(subject => {
                    const option = document.createElement('option');
                    option.value = subject;
                    option.textContent = subject;
                    subjectTeacherSelect.appendChild(option);
                });
            }
            
            // Update teachers list based on selected subject
            const selectedSubject = subjectTeacherSelect.value;
            const teachersList = document.getElementById('teachers-list');
            teachersList.innerHTML = '';
            if (selectedSubject && data.teachers[selectedSubject]) {
                data.teachers[selectedSubject].forEach(teacher => {
                    const item = document.createElement('div');
                    item.className = 'list-item';
                    item.textContent = teacher;
                    teachersList.appendChild(item);
                });
            }
            
            // Update major/minor dropdowns for connections
            const connectionMajorSelect = document.getElementById('connection-major');
            connectionMajorSelect.innerHTML = '';
            data.majors.forEach(major => {
                const option = document.createElement('option');
                option.value = major;
                option.textContent = major;
                connectionMajorSelect.appendChild(option);
            });
            
            const connectionMinorSelect = document.getElementById('connection-minor');
            connectionMinorSelect.innerHTML = '';
            data.minors.forEach(minor => {
                const option = document.createElement('option');
                option.value = minor;
                option.textContent = minor;
                connectionMinorSelect.appendChild(option);
            });
            
            // Update connections list
            const connectionsList = document.getElementById('connections-list');
            connectionsList.innerHTML = '';
            data.connections.forEach(connection => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.textContent = `${connection[0]} + ${connection[1]}`;
                connectionsList.appendChild(item);
            });
        }
        
        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            updateAllLists();
        });
    </script>
</body>
</html>